<!DOCTYPE html>
<html>
<head>
  <title>Коти-вояки: Файтинг</title>
  <style>
    body { font-family: Arial, sans-serif; background: #b7e0fe; text-align: center; }
    .arena {
      margin: 40px auto;
      width: 700px;
      height: 320px;
      background: url('https://i.imgur.com/hA0wKLe.jpg') center/cover no-repeat;
      border: 4px solid #333;
      position: relative;
      box-shadow: 0 8px 32px #0006;
    }
    .cat {
      position: absolute;
      top: 130px;
      width: 110px;
      height: 155px;
      transition: left 0.12s linear, top 0.1s linear;
      z-index: 2;
    }
    #cat1 { left: 70px; }
    #cat2 { left: 510px; transform: scaleX(-1); }
    .hp-bar {
      width: 110px;
      height: 15px;
      background: #ccc;
      margin: 8px auto 0 auto;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #333;
    }
    .hp {
      height: 100%;
      background: linear-gradient(90deg, #66e244, #19c70b);
      transition: width 0.2s;
    }
    .cat-name {
      background: #fff8;
      padding: 2px 8px;
      border-radius: 7px;
      margin: 0 0 2px 0;
      font-weight: bold;
      color: #333;
    }
    .hit-effect {
      position: absolute;
      width: 60px;
      height: 60px;
      pointer-events: none;
      z-index: 5;
      animation: hitanim 0.4s forwards;
    }
    @keyframes hitanim {
      0% { opacity: 1; transform: scale(1);}
      100% { opacity: 0; transform: scale(1.7);}
    }
    #result { font-size: 1.5em; margin: 18px; color: #c00; text-shadow: 1px 2px 8px #fff; }
  </style>
</head>
<body>
  <h1>Коти-вояки: Файтинг</h1>
  <div class="arena" id="arena">
    <div id="cat1" class="cat">
      <div class="hp-bar"><div id="hp1" class="hp" style="width:100%"></div></div>
      <div class="cat-name">Вогнезір</div>
      <img id="img1" src="https://i.imgur.com/9Y5m6jS.png" width="110" draggable="false" />
    </div>
    <div id="cat2" class="cat">
      <div class="hp-bar"><div id="hp2" class="hp" style="width:100%"></div></div>
      <div class="cat-name">Буревій</div>
      <img id="img2" src="https://i.imgur.com/6LwX6ID.png" width="110" draggable="false" />
    </div>
  </div>
  <div>Керування: <b>WASD</b> — рух, <b>Пробіл</b> — атака</div>
  <div id="result"></div>

  <script>
    // Параметри
    let hp1 = 100, hp2 = 100;
    let pos1 = 70;
    let pos2 = 510;
    let canAttack = true;
    let gameOver = false;

    const cat1 = document.getElementById('cat1');
    const cat2 = document.getElementById('cat2');
    const hp1bar = document.getElementById('hp1');
    const hp2bar = document.getElementById('hp2');
    const result = document.getElementById('result');
    const arena = document.getElementById('arena');

    function showHit(x, y) {
      const hit = document.createElement('img');
      hit.src = 'https://i.imgur.com/ZtF1q5i.png';
      hit.className = 'hit-effect';
      hit.style.left = x + 'px';
      hit.style.top = y + 'px';
      arena.appendChild(hit);
      setTimeout(() => arena.removeChild(hit), 400);
    }

    function updatePosition() {
      cat1.style.left = pos1 + 'px';
      cat2.style.left = pos2 + 'px';
    }

    function playerAttack() {
      if (gameOver || !canAttack) return;
      if (Math.abs(pos1 - pos2) < 120) {
        let damage = Math.floor(Math.random() * 14) + 7;
        hp2 -= damage;
        if (hp2 < 0) hp2 = 0;
        hp2bar.style.width = hp2 + "%";
        showHit(pos2 + 50, 100);
        document.getElementById("img1").style.filter = "brightness(1.2)";
        setTimeout(() => document.getElementById("img1").style.filter = "", 180);
        if (hp2 === 0) {
          result.innerText = "Вогнезір переміг!";
          gameOver = true;
        }
      }
      canAttack = false;
      setTimeout(() => canAttack = true, 480);
    }

    function aiAttack() {
      if (gameOver) return;
      if (Math.abs(pos1 - pos2) < 120) {
        let damage = Math.floor(Math.random() * 11) + 8;
        hp1 -= damage;
        if (hp1 < 0) hp1 = 0;
        hp1bar.style.width = hp1 + "%";
        showHit(pos1 + 50, 100);
        document.getElementById("img2").style.filter = "brightness(1.2)";
        setTimeout(() => document.getElementById("img2").style.filter = "", 180);
        if (hp1 === 0) {
          result.innerText = "Буревій переміг!";
          gameOver = true;
        }
      }
    }

    function aiMove() {
      if (gameOver) return;
      if (pos2 > pos1 + 120) pos2 -= 10;
      else if (pos2 < pos1 + 80) pos2 += 10;
      updatePosition();
      if (Math.abs(pos1 - pos2) < 120) aiAttack();
    }

    document.addEventListener('keydown', function(e) {
      if (gameOver) return;
      switch(e.key.toLowerCase()) {
        case 'a':
          pos1 = Math.max(0, pos1 - 17);
          updatePosition();
          break;
        case 'd':
          pos1 = Math.min(590, pos1 + 17);
          updatePosition();
          break;
        case 'w':
          cat1.style.top = "85px";
          setTimeout(() => cat1.style.top = "130px", 220);
          break;
        case 's':
          cat1.style.top = "165px";
          setTimeout(() => cat1.style.top = "130px", 220);
          break;
        case ' ':
          playerAttack();
          break;
      }
    });

    updatePosition();
    setInterval(aiMove, 330);
  </script>
</body>
</html>
